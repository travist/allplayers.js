/*! allplayers.js 2014-08-06 */
var allplayers=allplayers||{};allplayers.api=allplayers.api||{};allplayers.api.batch={newBatch:function(e){var t={batch:[],error:function(){},users:null,eachUser:function(e){return{name:e,each:this.users}},allUsers:function(e){var t={name:e};if(typeof this.users=="string"){t.source=this.users}else{t.value=this.users}return t},add:function(e){this.batch.push(e)},send:function(e){$.ajax({url:allplayers.api.root+"/batch",type:"POST",dataType:"json",xhrFields:{withCredentials:true},data:{batch:this.batch,"x-token":this.token},success:e,error:function(e,t,n){this.error(e,t,n)}})},setUsers:function(e,t,n,r,i,s){if(t){this.batch.push({method:"GET",resource:"group/"+i+"/members",id:"getGroupMembers",query:{exclude:e.length>0?e:[],uuidOnly:true,filter:n,groups:r,form:s}});this.users="getGroupMembers"}else{this.users=e}}};e=e||{};return $.extend(t,e)}}